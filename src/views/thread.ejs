<a href="/forum" class="back-link"> ← חזרה לדף הבית </a>

<article class="thread">
  <h2><%= thread.title %></h2>
  <p class="thread-content"><%= thread.content %></p>
  <div class="meta">
    Posted by <strong><%= thread.author || "Anonymous" %></strong>
    on <%= new Date(thread.created_at).toLocaleString() %>
  </div>
</article>

<section class="replies">
  <h3>תגובות</h3>

  <% if (replies.length === 0) { %>
  <p class="empty">ללא תגובות</p>
  <% } else { %>
  <ul>
    <% replies.forEach(r => { %>
    <li>
      <strong><%= r.author || 'Anonymous' %></strong>: <%= r.content %>

      <form
        action="/forum/thread/<%= thread.id %>/replies/<%= r.id %>/delete"
        method="POST"
        style="display: inline-block; margin-left: 8px"
      >
        <button
          type="submit"
          onclick="return confirm('Delete this reply?');"
          style="
            background: #c00;
            color: white;
            border: none;
            border-radius: 3px;
            padding: 2px 6px;
            font-size: 0.75rem;
            cursor: pointer;
          "
        >
          delete
        </button>
      </form>
    </li>
    <% }) %>
  </ul>
  <% } %>
</section>

<section class="new-reply">
  <h3>הוסף תגובה</h3>

  <form method="POST" action="/forum/thread/<%= thread.id %>/replies">
    <input type="text" name="author" placeholder="שם" />
    <textarea name="content" placeholder="תגובה" required></textarea>

    <button>שלח תגובה</button>
  </form>

  <form
    action="/forum/thread/<%= thread.id %>/delete"
    method="POST"
    style="margin-top: 1rem"
  >
    <button
      type="submit"
      style="
        background: red;
        color: white;
        padding: 6px 12px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 12px;
      "
    >
      Delete Thread
    </button>
  </form>
</section>
